<!-- @cmp-manifest
{
  "schema": "cmp-manifest/v1",
  "id": "phy.power.battery.basic",
  "name": "干电池",
  "nameEn": "Battery Cell",
  "category": "physics/circuit",
  "version": "1.0.0",
  "viewport": { "w": 120, "h": 48 },
  "props": [
    { "key": "size",        "type": "number(px)", "default": 64,  "min": 24,  "max": 256, "desc": "组件高度（宽度按比例缩放）" },
    { "key": "aspect",      "type": "number",     "default": 2.5, "min": 1.5, "max": 4.0, "desc": "宽高比（width = size × aspect）" },

    { "key": "stroke",      "type": "color",  "default": "#111827", "desc": "描边颜色" },
    { "key": "strokeWidth", "type": "number", "default": 2.0, "min": 0.5, "max": 6, "desc": "描边粗细" },

    { "key": "bodyColor",   "type": "color", "default": "#3b82f6", "desc": "电池外壳颜色（蓝色系）" },
    { "key": "capColor",    "type": "color", "default": "#d4a017", "desc": "正极铜帽颜色（金色系）" },
    { "key": "baseColor",   "type": "color", "default": "#a0a0a0", "desc": "负极底座颜色（银灰色）" },
    { "key": "labelColor",  "type": "color", "default": "#ffffff", "desc": "标签文字颜色" },

    { "key": "voltage",     "type": "number", "default": 1.5, "min": 0.1, "max": 24, "desc": "标称电压（V）" },
    { "key": "showLabel",   "type": "enum",   "default": "auto", "enum": ["auto","on","off"], "desc": "是否显示电压标签" },

    { "key": "glow",        "type": "number(0-1)", "default": 0, "min": 0, "max": 1, "desc": "强调/亮度（可选）" }
  ],
  "cssVars": {
    "size":        "--cmp-size",
    "aspect":      "--cmp-aspect",
    "stroke":      "--cmp-stroke",
    "strokeWidth": "--cmp-stroke-width",
    "bodyColor":   "--cmp-body",
    "capColor":    "--cmp-cap",
    "baseColor":   "--cmp-base",
    "labelColor":  "--cmp-label-color",
    "glow":        "--cmp-glow"
  },
  "tags": ["battery", "cell", "power", "circuit", "dc"]
}
-->
<div class="cmp" data-cmp-id="phy.power.battery.basic" role="img" aria-label="干电池 1.5V">
  <style>
    .cmp[data-cmp-id="phy.power.battery.basic"] {
      height: var(--cmp-size, 64px);
      width: calc(var(--cmp-size, 64px) * var(--cmp-aspect, 2.5));
      display: inline-grid;
      place-items: center;
      transform: rotate(var(--cmp-rotate, 0deg)) scale(var(--cmp-scale, 1));
    }

    .cmp[data-cmp-id="phy.power.battery.basic"] .cmp__svg {
      width: 100%;
      height: 100%;
      display: block;
      filter: drop-shadow(
        0 0 calc(10px * var(--cmp-glow, 0))
        rgba(var(--cmp-glow-rgb, 255, 214, 102), calc(0.9 * var(--cmp-glow, 0)))
      );
    }
  </style>

  <svg class="cmp__svg" viewBox="0 0 120 48" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <!-- 左侧引脚（负极 −） -->
    <path d="M0 24 H14" fill="none" stroke="var(--cmp-stroke, #111827)"
          stroke-width="var(--cmp-stroke-width, 2)" stroke-linecap="round" opacity="0.85"/>

    <!-- 右侧引脚（正极 +） -->
    <path d="M106 24 H120" fill="none" stroke="var(--cmp-stroke, #111827)"
          stroke-width="var(--cmp-stroke-width, 2)" stroke-linecap="round" opacity="0.85"/>

    <!-- 负极底座（左端扁平金属片） -->
    <rect x="14" y="10" width="8" height="28" rx="2"
          fill="var(--cmp-base, #a0a0a0)"
          stroke="var(--cmp-stroke, #111827)" stroke-width="var(--cmp-stroke-width, 2)"/>
    <!-- 底座高光 -->
    <rect x="15" y="12" width="6" height="10" rx="1" fill="#fff" opacity="0.18"/>

    <!-- 电池主体 -->
    <rect x="22" y="6" width="72" height="36" rx="4"
          fill="var(--cmp-body, #3b82f6)"
          stroke="var(--cmp-stroke, #111827)" stroke-width="var(--cmp-stroke-width, 2)"
          stroke-linejoin="round"/>
    <!-- 主体高光 -->
    <rect x="24" y="8" width="68" height="14" rx="3" fill="#fff" opacity="0.18"/>
    <!-- 主体阴影 -->
    <rect x="24" y="28" width="68" height="10" rx="3" fill="#000" opacity="0.10"/>

    <!-- 装饰条纹（电池标签区） -->
    <rect x="36" y="11" width="48" height="26" rx="2" fill="none"
          stroke="var(--cmp-label-color, #fff)" stroke-width="0.6" opacity="0.5"/>

    <!-- 电压文字 -->
    <text class="bat__label" x="60" y="28" text-anchor="middle"
          font-size="11" font-weight="700" letter-spacing="0.5"
          fill="var(--cmp-label-color, #fff)"
          font-family="Arial, Helvetica, sans-serif">1.5V</text>

    <!-- 正极铜帽（右端凸起圆柱） -->
    <rect x="94" y="8" width="12" height="32" rx="3"
          fill="var(--cmp-cap, #d4a017)"
          stroke="var(--cmp-stroke, #111827)" stroke-width="var(--cmp-stroke-width, 2)"/>
    <!-- 铜帽凸起 -->
    <rect x="100" y="14" width="6" height="20" rx="3"
          fill="var(--cmp-cap, #d4a017)"
          stroke="var(--cmp-stroke, #111827)" stroke-width="var(--cmp-stroke-width, 2)"/>
    <!-- 铜帽高光 -->
    <rect x="95" y="10" width="10" height="12" rx="2" fill="#fff" opacity="0.22"/>

    <!-- + − 极性标记 -->
    <text x="109" y="7" text-anchor="middle" font-size="8" font-weight="800"
          fill="var(--cmp-stroke, #111827)" font-family="Arial, sans-serif">+</text>
    <text x="17" y="7" text-anchor="middle" font-size="8" font-weight="800"
          fill="var(--cmp-stroke, #111827)" font-family="Arial, sans-serif">−</text>
  </svg>

  <script>
  (function () {
    const script = document.currentScript;
    if (!script) return;
    const root = script.closest('[data-cmp-id="phy.power.battery.basic"]');
    if (!root) return;

    const defaults = { voltage: 1.5, showLabel: 'auto' };
    let p = { ...defaults };
    const raw = root.getAttribute('data-props');
    if (raw) {
      try {
        const o = JSON.parse(raw);
        if (o && typeof o === 'object') p = { ...p, ...o };
      } catch (e) {}
    }

    const v = Number(p.voltage);
    const voltage = Number.isFinite(v) ? v : defaults.voltage;
    const show = String(p.showLabel || 'auto');
    const label = root.querySelector('.bat__label');

    if (label) {
      const text = voltage + 'V';
      label.textContent = text;
      if (show === 'off') label.style.display = 'none';
    }

    root.setAttribute('aria-label', '干电池 ' + voltage + 'V');
  })();
  </script>
</div>

